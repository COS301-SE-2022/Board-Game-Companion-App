<div class="container">
<!-- Information -->
    <div class="container-fluid px-2 pt-4">
        <div class="row g-2">
            <div class="col-xl-1 col-md-3 mb-4" >
                <div class="action card border-left-primary shadow w-20 h-100 py-1" id="card-1">
                    <div class="card-body" data-bs-toggle="modal" data-bs-target="#create-script" data-toggle="tooltip" title="new">
                        <div class="text-center">
                            <i class="fas fa-plus fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-1 col-md-3 mb-4">
                <div class="action card border-left-primary shadow w-20 h-100 py-1" id="card-2">
                    <div class="card-body" (click)="toggleView()" data-toggle="tooltip" [title]="gridView===false ? 'grid' : 'list'">
                        <div class="text-center">
                            <i *ngIf="gridView === false" class="fas fa-th-large fa-2x"></i>
                            <i *ngIf="gridView === true" class="fas fa-th-list fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<div class="container" >
<!-- search and sort functionality -->
    <div class = "row" >
        <div class = "col-xs-12 col-sm-8" >
            <input id = "textInput" [(ngModel)]="searchValue">
            <button id = "search" class="btn px-2 py-1 font-bold" (click)="test()">Search</button>
        </div>
        <div class = "col-xs-12 col-sm-4" >
            <select id="sorting" class="btn px-2 py-1 font-bold" [(ngModel)]="selected" (change)="test()">
                <option selected value="alphabetical">Alphabetical</option>
                <option value="date">Date</option>
            </select>
            <button id = "sort" class="btn px-2 py-1 font-bold">Sort</button>
        </div>
    </div>
<!-- a table and search functionality -->

    <div class = "row p-2">
        
        <div class = "flex flex-row" *ngIf="gridView===true">
            <div (click) = "containerClick($event)" id = "wrapper" class = "grid xs:grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                <div (mouseover)="currentHover(value)" (mouseout) = "clearHover()" [ngClass]="{'hover:border-zinc-800 hover:border-4':currentScript._id !== value._id,'border-green-800 border-4 hover:border-0':currentScript._id === value._id}" *ngFor="let value of scripts | paginate: { itemsPerPage: 8, currentPage: page }" [id] = "value._id" class="parent relative rounded-lg w-56 h-52 overflow-hidden" (click)="selected(value)">
                    <span *ngIf = "value.status.value === 0" class = "absolute right-0 top-0 mr-2 mt-1"><i class="fas fa-times-circle" style="color:red"></i></span>
                    <span *ngIf = "value.status.value === 1" class = "absolute right-0 top-0 mr-2 mt-1"><i class="fas fa-cogs" style="color:orange"></i></span>
                    <span *ngIf = "value.status.value === 2" class = "absolute right-0 top-0 mr-2 mt-1"><i class="fas fa-check-circle" style="color:green"></i></span>      
                    <img class="w-full h-full" [src]="value.icon" alt=""/>
                    
                    <div class = "child absolute bottom-0 right-0 left-0 top-0 w-full z-10 text-center text-white text-base" style = "background-color:rgba(0,0,0,0.5)">
                        <div class = "w-full absolute bottom-20 content-center space-x-4">
                            <button (click)="test()" class="hover:scale-110 p-1 text-white" data-toggle="modal">
                                <i class="fas fa-play" data-toggle="tooltip" title="play"></i>
                            </button>
                            <button (click)="showInfo(value)" class="hover:scale-110 p-1 text-white">
                                <i class="fas fa-info-circle" data-toggle="tooltip" title="profile"></i>
                            </button>
                            <button (click)="showEditor(value)" class="hover:scale-110 p-1 text-white">
                                <i class="fas fa-edit" data-toggle="tooltip" title="edit"></i>
                            </button>
                        
                            <button (click)="test()" class="hover:scale-110 p-1 text-white" data-toggle="modal">
                                <i class="fas fa-trash" data-toggle="tooltip" title="remove"></i>
                            </button>
                        </div>
                        <p class = "absolute bottom-0 h-8 text-center w-full"><b>{{value.name}}</b></p>
                    </div>
                </div>
            </div>
        </div>
        
        
        <table class="table-auto" data-toggle="table" *ngIf="gridView===false">
            <thead>
                <tr>
                    <th>
                        Name
                    </th>
                    <th>
                        Created
                    </th>
                    <th>
                        Last Update
                    </th>
                    <th>
                        Status
                    </th>
                    <th>
                        Size
                    </th>
                    <th>
                        Actions
                    </th>
                </tr>
            </thead>

            <tbody >
                <tr (click)="selected(value)" [ngClass]="{'bg-slate-700 text-white':currentScript._id === value._id}" [id] = "value._id" *ngFor="let value of scripts | paginate: { itemsPerPage: 8, currentPage: page }" class = "hover:bg-slate-500 hover:text-white">
                    <td>
                        <div class = "flex flex-row">
                            <div class = "w-8 h-8">
                                <img class="w-full h-full" [src]="value.icon" alt=""/>
                            </div>
                            <div class = "ml-2">
                                {{value.name}}
                            </div>
                        </div>
                    </td>
                    <td>
                        {{formatDate(value.created)}}
                    </td>
                    <td>
                        {{formatDate(value.lastupdate)}}
                    </td>
                    <td>
                        <span *ngIf = "value.status.value ===0" class = "mr-2 mt-1"><i class="fas fa-times-circle" style="color:red"></i></span>
                        <span *ngIf = "value.status.value ===1" class = " mr-2"><i class="fas fa-cogs" style="color:orange"></i></span>
                        <span *ngIf = "value.status.value ===2" class = " mr-2 mt-1"><i class="fas fa-check-circle" style="color:green"></i></span>
                        {{value.status.value === 0 ? "Flagged" : (value.status.value === 1 ? "In Progress" : "Published")}}
                    </td>
                    <td>
                        {{convertBytes(value.size)}}
                    </td>
                    <td class="text-center align-middle flex flex-row">
                        <button (click)="test()" class="hover:scale-110 p-1 text-green-800" data-toggle="modal">
                            <i class="fas fa-play" data-toggle="tooltip" title="play"></i>
                        </button>
                        <button (click)="showInfo(value)" class="hover:scale-110 p-1 text-green-800" data-toggle="modal">
                            <i class="fas fa-info-circle" data-toggle="tooltip" title="profile"></i>
                        </button>
                        <button (click)="test()" class="hover:scale-110 p-1 text-green-800" data-toggle="modal">
                            <i class="fas fa-edit" data-toggle="tooltip" title="edit"></i>
                        </button>
                        <button (click)="test()" class="hover:scale-110 p-1 text-green-800" data-toggle="modal">
                            <i class="fas fa-trash" data-toggle="tooltip" title="remove"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <pagination-controls *ngIf = "scripts.length !== 0" class="mt-4 d-flex justify-content-center" (pageChange)="page = $event"></pagination-controls>
    </div>
</div>

<board-game-companion-app-create-scripts (newScript)="insertScript($event)"></board-game-companion-app-create-scripts>